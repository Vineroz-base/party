<!DOCTYPE html>
<html>
  <head>
    <title>Random Number</title>
    <style>
      body {
        background-color: #121212;
        color: #f5f5f5;
        display: flex;
        flex-direction: column;   /* stack number + message vertically */
        justify-content: center;
        align-items: center;
        height: 100vh;
        margin: 0;
        font-family: Arial, sans-serif;
      }
      .number {
        font-size: 36vw;
      }
      .message {
        font-size: 10vw;
        font-style: italic;
        margin-top: 10px;
      }
    </style>
  </head>
  <body>
    <div class="number" id="number"></div>
    <div class="message" id="message"></div>

    <script>
      // Check if we already have a stored number and timestamp
      const storedNumber = localStorage.getItem("randomNumber");
      const storedTime = localStorage.getItem("randomNumberTime");
      const now = Date.now();

      let number, timestamp;

      if (storedNumber && storedTime && (now - storedTime < 15 * 60 * 1000)) {
        // If less than 15 minutes old, reuse the stored number
        number = storedNumber;
        timestamp = parseInt(storedTime);
      } else {
        // Otherwise, generate a new one and store it
        number = Math.floor(Math.random() * 100) + 1;
        timestamp = now;
        localStorage.setItem("randomNumber", number);
        localStorage.setItem("randomNumberTime", timestamp);
      }

      // Show the number
      document.getElementById("number").textContent = number;

      // Countdown function
      function updateCountdown() {
        const remaining = (timestamp + 15 * 60 * 1000) - Date.now();

        if (remaining <= 0) {
          document.getElementById("message").textContent = "Refresh page to update!";
          return;
        }

        const minutes = Math.floor(remaining / 60000);
        const seconds = Math.floor((remaining % 60000) / 1000);

        const mm = minutes.toString().padStart(2, '0');
        const ss = seconds.toString().padStart(2, '0');

        document.getElementById("message").textContent = `Refreshes after ${mm}:${ss}...`;
      }

      // Update every second
      updateCountdown();
      setInterval(updateCountdown, 1000);
    </script>
  </body>
</html>
